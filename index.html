<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flash Cards Printer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main Container -->
    <div class="app-container">
        <!-- Header -->
        <header>
            <h1>üìö Flash Cards Printer</h1>
            <p>Create unlimited printable flash cards</p>
        </header>

        <div class="main-content">
            <!-- Left Section: Card Creator & List -->
            <div class="left-section">
                <!-- Card Input Section -->
                <div class="card-creator">
                    <h2>Create New Card</h2>
                    
                    <div class="input-row">
                        <div class="input-field">
                            <label for="questionInput">
                                Question 
                                <span class="char-count" id="questionCharCount">0 chars</span>
                            </label>
                            <textarea id="questionInput" placeholder="Enter your question..." rows="4"></textarea>
                        </div>
                        
                        <div class="input-field">
                            <label for="answerInput">
                                Answer
                                <span class="char-count" id="answerCharCount">0 chars</span>
                            </label>
                            <textarea id="answerInput" placeholder="Enter your answer..." rows="4"></textarea>
                        </div>
                    </div>

                    <div class="creator-actions">
                        <button id="addCardBtn" class="btn btn-primary">‚ûï Add Card</button>
                        <button id="updateCardBtn" class="btn btn-success" style="display: none;">‚úì Update Card</button>
                        <button id="cancelEditBtn" class="btn btn-secondary" style="display: none;">‚úï Cancel</button>
                    </div>
                </div>

                <!-- Configuration Section -->
                <div class="config-section">
                    <label for="cardsPerSheet">Cards per sheet:</label>
                    <select id="cardsPerSheet">
                        <option value="4">4 cards (2√ó2)</option>
                        <option value="6">6 cards (2√ó3)</option>
                        <option value="8" selected>8 cards (2√ó4)</option>
                    </select>
                    <span class="card-count" id="cardCount">0 cards</span>
                </div>

                <!-- Card Collection -->
                <div class="card-collection">
                    <div class="collection-header">
                        <h2>Your Cards</h2>
                        <div class="collection-actions">
                            <button id="printAllBtn" class="btn btn-primary">üñ®Ô∏è Print All</button>
                            <button id="clearAllBtn" class="btn btn-danger">üóëÔ∏è Clear All</button>
                        </div>
                    </div>

                    <div id="cardList" class="card-list">
                        <div class="empty-state">
                            <p>No cards yet. Create your first card above! üëÜ</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Section: Grid Preview -->
            <div class="right-section">
                <div class="grid-preview">
                    <h3>üìã Layout Preview</h3>
                    <div class="sheet-tabs" id="sheetTabs">
                        <button class="sheet-tab active" data-sheet="0">Sheet 1</button>
                    </div>
                    <div class="grid-container" id="gridContainer">
                        <!-- Grid cells generated by JS -->
                    </div>
                    <div class="preview-legend">
                        <div class="legend-item">
                            <span class="legend-box empty"></span> Empty
                        </div>
                        <div class="legend-item">
                            <span class="legend-box occupied"></span> Occupied
                        </div>
                        <div class="legend-item">
                            <span class="legend-box merged"></span> Merged
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Merge Dialog Modal -->
    <div id="mergeDialog" class="modal">
        <div class="modal-content">
            <h3>‚ö†Ô∏è Card Needs Extra Space</h3>
            <p id="mergeDialogText">This card has <strong>XXX characters</strong> and needs 2 cell positions.</p>
            
            <div class="merge-options">
                <label class="merge-option">
                    <input type="radio" name="mergeType" value="down" checked>
                    <div class="option-details">
                        <strong>Merge DOWN (recommended)</strong>
                        <span class="option-desc">Occupies 2 rows in same column</span>
                        <div class="option-visual">
                            <div class="mini-grid">
                                <div class="mini-cell active">1</div>
                                <div class="mini-cell">2</div>
                                <div class="mini-cell active">‚Üì</div>
                                <div class="mini-cell">4</div>
                            </div>
                        </div>
                    </div>
                </label>

                <label class="merge-option">
                    <input type="radio" name="mergeType" value="right">
                    <div class="option-details">
                        <strong>Merge RIGHT</strong>
                        <span class="option-desc">Occupies 2 columns in same row</span>
                        <div class="option-visual">
                            <div class="mini-grid">
                                <div class="mini-cell active">1</div>
                                <div class="mini-cell active">‚Üí</div>
                                <div class="mini-cell">3</div>
                                <div class="mini-cell">4</div>
                            </div>
                        </div>
                    </div>
                </label>

                <label class="merge-option">
                    <input type="radio" name="mergeType" value="none">
                    <div class="option-details">
                        <strong>Don't merge (shrink text)</strong>
                        <span class="option-desc">Text will be very small</span>
                    </div>
                </label>
            </div>

            <div class="modal-actions">
                <button id="cancelMergeBtn" class="btn btn-secondary">Cancel</button>
                <button id="confirmMergeBtn" class="btn btn-primary">Apply Merge</button>
            </div>
        </div>
    </div>

    <!-- Print Container (Generated Dynamically) -->
    <div class="print-container" id="printContainer"></div>

    <script src="script.js"></script>
</body>
</html>